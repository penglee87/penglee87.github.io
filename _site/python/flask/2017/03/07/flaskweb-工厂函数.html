<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>flaskweb 工厂函数</title>
	
	<meta name="author" content="lee">
	


	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->

	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/pygments.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">
	<link href="/assets/css/default.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

</head>

<body>

	<!-- nav-menu-right 
	<div class="header ">
		<div class="header-nav-right">
			<h3>实用链接</h3>
			<div class="container-side-nav-link">
				<li><a href="/">Home</a></li>
				<li><a target="_blank" href="https://github.com/penglee87">My Git</a></li>
				<li><a target="_blank" href="https://www.zhihu.com/people/lee-82-75-31/activities">My Zhihu</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
				<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
			</div>
		</div>
	</div>
	-->

	<!-- nav-menu-dropdown -->
	<div class="header ">
		<div class="header-nav-left">
			<li><a href="/">Home</a></li>
			<li><a href="/categories.html">Categories</a></li>
			<!--<li><a href="/tags.html">Tags</a></li> -->
			<li><a href="/about.html">About</a></li>
			<li><a target="_blank" href="https://github.com/penglee87">My Git</a></li>
			<li><a target="_blank" href="https://www.zhihu.com/people/lee-82-75-31/activities">My Zhihu</a></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
			

		</div>
	</div>
	
	<!-- nav-menu-dropdown 
	<div class="header ">
		<div class="header-nav-left">
			<li><a href="/categories.html">Categories</a></li>
			
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Jekyll <span class="badge">5</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/jekyll/2017/03/07/Jekyll%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83.html">Jekyll搭建本地博客环境</a> <span class="text-muted">- March 07, 2017</span></li>
						
					  
					
					  
						
						  <li style="line-height: 35px;"><a href="/jekyll/2017/03/07/Jekyll-%E5%B8%B8%E7%94%A8%E5%8F%98%E9%87%8F.html">Jekyll 常用变量</a> <span class="text-muted">- March 07, 2017</span></li>
						
					  
					
					  
						
						  <li style="line-height: 35px;"><a href="/jekyll/2017/03/07/Jekyll-Date-Formatting.html">Jekyll 日期格式</a> <span class="text-muted">- March 07, 2017</span></li>
						
					  
					
					  
						
						  <li style="line-height: 35px;"><a href="/reproduce/jekyll/2015/06/06/%E5%9C%A8github-pages%E7%BD%91%E7%AB%99%E4%B8%8B%E7%94%A8jekyll%E5%88%B6%E4%BD%9C%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B.html">在github pages网站下用jekyll制作博客教程</a> <span class="text-muted">- June 06, 2015</span></li>
						
					  
					
					  
						
						  <li style="line-height: 35px;"><a href="/jekyll/reproduce/2013/11/14/sample.html">Sample</a> <span class="text-muted">- November 14, 2013</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Reproduce <span class="badge">2</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/reproduce/jekyll/2015/06/06/%E5%9C%A8github-pages%E7%BD%91%E7%AB%99%E4%B8%8B%E7%94%A8jekyll%E5%88%B6%E4%BD%9C%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B.html">在github pages网站下用jekyll制作博客教程</a> <span class="text-muted">- June 06, 2015</span></li>
						
					  
					
					  
						
						  <li style="line-height: 35px;"><a href="/jekyll/reproduce/2013/11/14/sample.html">Sample</a> <span class="text-muted">- November 14, 2013</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Markdown <span class="badge">1</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/markdown/2017/02/25/Markdown%E8%AF%AD%E6%B3%95.html">Markdown 常用语法指南</a> <span class="text-muted">- February 25, 2017</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Mysql <span class="badge">1</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/mysql/2017/02/25/mysql-%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95.html">Mysql 常用语句</a> <span class="text-muted">- February 25, 2017</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Python <span class="badge">1</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/python/flask/2017/03/07/flaskweb-%E5%B7%A5%E5%8E%82%E5%87%BD%E6%95%B0.html">flaskweb 工厂函数</a> <span class="text-muted">- March 07, 2017</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
			<div class="dropdown">
				<li>				
				<a href="/categories_general.html" >
						Flask <span class="badge">1</span>
					</a>
				</li>

				<div class="dropdown-content">				
				<li>
					
					
					  
						
						  <li style="line-height: 35px;"><a href="/python/flask/2017/03/07/flaskweb-%E5%B7%A5%E5%8E%82%E5%87%BD%E6%95%B0.html">flaskweb 工厂函数</a> <span class="text-muted">- March 07, 2017</span></li>
						
					  
					
					

				</li>				
				</div>
			</div>
			
		</div>
	</div>
	-->

	<div >
		<div class="header">
  <h1>Lee's Journey</h1>
</div>

<div class="container container-wrap ">

	<div class="page-header">
	  <h1>flaskweb 工厂函数 </h1>
	</div>


	<div class="post-body">

	 <span class="post-date">
	   
	   March 
	   7th,
	   
	   2017
	 </span>
		<div class="article_body">
		<p>配置类可以定义 init_app() 类方法，其参数是程序实例。在这个方法中，可以执行对当前环境的配置初始化。</p>

<p>构造文件(init.py)导入了大多数正在使用的Flask扩展。
由于尚未初始化所需的程序实例，所以没有初始化扩展，创建扩展类时没有向构造函数传入参数。</p>

<p>create_app() 函数就是程序的工 厂函数，接受一个参数，是程序使用的配置名。
配置类在 config.py 文件中定义，其中保存的配置可以使用 Flask app.config 配置对象提供的 from_object() 方法直接导入程序。</p>

<p>至于配置对象，则可以通过名字从 config 字典中选择。程序创建并配置好后，就能初始化扩展了。</p>

<p>在之前创建的扩展对象上调用 init_app() 可以完成初始化过程。</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="lineno"> 1 </span><span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
<span class="lineno"> 2 </span>    <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;hard to guess string&#39;</span>  
<span class="lineno"> 3 </span>    <span class="n">SQLALCHEMY_COMMIT_ON_TEARDOWN</span> <span class="o">=</span> <span class="bp">True</span>  
<span class="lineno"> 4 </span>    <span class="n">MAIL_SERVER</span> <span class="o">=</span> <span class="s1">&#39;smtp.googlemail.com&#39;</span>  
<span class="lineno"> 5 </span>    <span class="n">MAIL_PORT</span> <span class="o">=</span> <span class="mi">587</span>  
<span class="lineno"> 6 </span>    <span class="n">MAIL_USE_TLS</span> <span class="o">=</span> <span class="bp">True</span>  
<span class="lineno"> 7 </span>    <span class="n">MAIL_USERNAME</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">)</span>  
<span class="lineno"> 8 </span>    <span class="n">MAIL_PASSWORD</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">)</span>  
<span class="lineno"> 9 </span>    <span class="n">FLASKY_MAIL_SUBJECT_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;[Flasky]&#39;</span>  
<span class="lineno">10 </span>    <span class="n">FLASKY_MAIL_SENDER</span> <span class="o">=</span> <span class="s1">&#39;Flasky Admin &lt;flasky@example.com&gt;&#39;</span>  
<span class="lineno">11 </span>    <span class="n">FLASKY_ADMIN</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FLASKY_ADMIN&#39;</span><span class="p">)</span>  
<span class="lineno">12 </span>    <span class="nd">@staticmethod</span>  
<span class="lineno">13 </span>    <span class="k">def</span> <span class="nf">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
<span class="lineno">14 </span>        <span class="k">pass</span></code></pre></figure>

		</div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#python-ref">
					python <span>(1)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#flask-ref">
					flask <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#Jekyll-ref">
					Jekyll <span>(5)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#语法-ref">
					语法 <span>(6)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>



		<div class="clearfix"></div>

			<ul class="pager">
			  
			  <li class="previous"><a href="/jekyll/2017/03/07/Jekyll%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83.html" title="Jekyll搭建本地博客环境">&larr; Previous</a></li>
			  
			  
				<li class="next disabled"><a>Next &rarr;</a>
			  
			</ul>


	</div>
		

</div>




	</div>
	<!--
	<div class="footer">
		<hr/>
		<p>
			&copy; 2017 lee with Jekyll. Theme: 
			<a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
		</p>
	</div>

	
	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
	-->
</body>
</html>
